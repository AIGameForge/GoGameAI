<!doctype html>
<html lang="zh-Hant">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>中文打字：落字練習</title>
    <meta name="description" content="復古 Windows 95 風格的中文打字落字遊戲：字會往下掉，打中得分。" />
    <link rel="stylesheet" href="./style.css" />
    <script src="./main.js" defer></script>
  </head>
  <body>
    <div class="wrap">
      <div class="topbar">
        <div>
          <div class="sub"><a href="../">← 回首頁</a></div>
          <h1 class="title">中文打字：落字練習</h1>
          <div class="sub">單字會從上方掉下來，輸入並按 Enter 命中得分。</div>
        </div>
        <div class="sub" id="statusText">準備開始</div>
      </div>

      <div class="layout">
        <div class="panel">
          <div class="hud">
            <div class="hudLeft">
              <div class="pill">分數 <b id="score">0</b></div>
              <div class="pill">連擊 <b id="combo">0</b></div>
              <div class="pill">炮彈 <b id="ammo">0</b></div>
              <div class="pill">關卡 <b id="level">1</b></div>
              <div class="pill">本關 <b id="stageProgress">0/0</b></div>
              <div class="pill">剩餘 <b id="timeLeft">03:00</b></div>
            </div>
            <div class="controls">
              <button id="btnStart" type="button">開始</button>
              <button id="btnPause" class="secondary" type="button">暫停</button>
              <button id="btnReset" class="secondary" type="button">重來</button>
            </div>
          </div>
          <div class="scoreBar" aria-hidden="true">
            <div class="scoreBarFill" id="scoreBar"></div>
          </div>

          <div class="game" id="game">
            <div class="flash" id="flash"></div>
            <div class="banner" id="banner" aria-live="polite"></div>
            <div class="playfield" id="playfield" aria-label="落字區"></div>
            <div class="floor" aria-hidden="true"></div>

            <div class="centerOverlay" id="overlay">
              <div class="overlayCard">
                <h2 id="overlayTitle">玩法</h2>
                <p id="overlayDesc">
                  上方會不斷掉落中文單字。請在下方輸入框輸入相同文字並按
                  <b>Enter</b> 送出；命中得分、沒命中會中斷連段。每關有時間限制，時間內達標即可過關。
                </p>
                <div class="overlayActions">
                  <button id="btnOverlayStart" type="button">開始遊戲</button>
                  <button id="btnOverlayFocus" class="secondary" type="button">
                    我只想先聚焦輸入框
                  </button>
                </div>
              </div>
            </div>

            <div class="bottom">
              <form id="form">
                <input
                  id="input"
                  type="text"
                  inputmode="text"
                  autocomplete="off"
                  spellcheck="false"
                  placeholder="輸入 1 個字（按 Enter 命中）"
                />
                <button type="submit">送出（Enter）</button>
              </form>
              <div class="hint" id="hint">
                建議使用中文輸入法；本遊戲以「送出（Enter）」作為命中判定時機。一次打一個字即可。
              </div>
            </div>
          </div>
        </div>

        <div class="panel sidebar">
          <h3 class="sectionTitle">設定</h3>
          <div class="box">
            <div class="row">
              <label for="difficulty">難度</label>
              <select id="difficulty">
                <option value="easy">簡單（更慢、更少）</option>
                <option value="normal" selected>普通</option>
                <option value="hard">困難（稍快、較密）</option>
              </select>
            </div>
            <div class="row">
              <label for="wordset">字庫</label>
              <select id="wordset">
                <option value="common" selected>常用字（單字）</option>
                <option value="advanced">進階字（單字）</option>
                <option value="punct">標點符號</option>
                <option value="zhuyin">注音符號（1～3 符號）</option>
              </select>
            </div>
            <div class="small">
              小提醒：這是「打出中文字符」的練習，所以會依賴你的中文輸入法。為了避免 IME
              組字階段干擾，本遊戲以「送出（Enter）」作為命中判定時機；也因此較適合練「準確」與「節奏」。
            </div>
          </div>

          <h3 class="sectionTitle">規則</h3>
          <div class="box small">
            - 命中：輸入文字與其中一個落字<strong>完全相同</strong> → 得分、連擊 +1<br />
            - 出錯：送出後<strong>沒有命中任何字</strong> → 連擊歸零（並可能扣分）<br />
            - 漏字：落字碰到底線 → <strong>扣分</strong>、連擊歸零<br />
            - 過關：<strong>3 分鐘內</strong>達到本關目標分數 → 進入下一關（難度循序漸進）
          </div>

          <h3 class="sectionTitle">武器字</h3>
          <div class="box small">
            偶爾會掉落武器字（例如「爆」「箭」）：命中後會引爆或射擊，順便清掉其他字並有特效。
          </div>

          <h3 class="sectionTitle">炮彈</h3>
          <div class="box small">
            每<strong>成功命中 10 次</strong>會獲得 1 枚炮彈。當你有炮彈時，<strong>用滑鼠點擊任一落字</strong>會發射飛彈把它炸掉（增加趣味，且能降低漏字扣分風險）。
          </div>

          <h3 class="sectionTitle">最高紀錄</h3>
          <div class="box small">
            <div id="bestTimes" class="bestTimes">尚無紀錄</div>
            <div class="small" style="margin-top: 8px">
              紀錄保存在你的瀏覽器（localStorage），不同裝置/瀏覽器不會同步。
            </div>
          </div>

          <h3 class="sectionTitle">快捷鍵</h3>
          <div class="box small">
            - <b>Enter</b>：送出命中（輸入框內）<br />
            - <b>Esc</b>：暫停/繼續<br />
            - <b>Ctrl/Cmd + K</b>：清空輸入框
          </div>
        </div>
      </div>
    </div>
  </body>
</html>


